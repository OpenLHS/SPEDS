<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="description" content="Document de conception pour SPEDS Transport">
<meta name="keywords" content="SPEDS">
<meta name="author" content="Équipe du GRIIS">
<meta name="copyright" content="GRIIS">
<title>Conception du module « SPEDS - Transport »</title>
<style>
@font-face {
    font-family: 'Fira Go';
    src: url('../fonts/FiraGO-Regular.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Fira Go';
    src: url('../fonts/FiraGO-Bold.ttf') format('truetype');
    font-weight: bold;
    font-style: normal;
}

@font-face {
    font-family: 'Fira Go';
    src: url('../fonts/FiraGO-Italic.ttf') format('truetype');
    font-weight: normal;
    font-style: italic;
}

/* Styles de base */
body {
    font-family: 'Fira Go', Arial, sans-serif;
    font-size: 12pt;
    color: #000000;
    line-height: 1.42;
    max-width: 100%;
    margin: 0 auto;
    padding: 0 1in;
    background-color: white;
}

/* Page et conteneur principal */
.document {
    max-width: 8.5in; /* Letter width minus margins */
    margin: 0 auto;
}

/* En-têtes */
h2, h3, h4, h5, h6 {
    color: #6ea1c5;
    font-size: 17pt;
    font-weight: bold;
    line-height: 1.2;
    margin-bottom: 10pt;
    margin-top: 20pt;
}

/* Page de titre */
.title-page {
    text-align: center;
    margin-top: 22%;
}

h1 {
    font-size: 28pt;
    font-weight: bold;
    color: black;
    margin-top: 100pt;
    margin-bottom: 100pt;
    text-align: center;
}

.details {
    font-size: 16pt;
    margin-bottom: 100pt;
    text-align: center;
}

.author {
    margin-bottom: 100pt;
}

.email {
    display: none;
}

#revnumber {
    display: none;
}

.details #revdate {
    margin-top: 100px;
    display: inline-block;
}

/* Logo en en-tête */
.title-logo {
    height: auto;
    width: auto;
    max-width: 340px;
}

/* Table des matières */

#toctitle {
    font-size: 24pt;
    font-weight: bold;
    color: #6ea1c5;
    margin-bottom: 30pt;
}

.toc {
    font-size: 14pt;
    page-break-before: always;
}

.toc ul {
    list-style: none;
    padding-left: 0;
}

.toc li {
    margin-bottom: 5pt;
}

.toc a {
    text-decoration: none;
    color: #1d4b8f;
}

.toc a:hover {
    color: #002FA7;
}

/* Liens */
a {
    color: #002FA7;
    text-decoration: underline;
}

a:hover {
    color: #6ea1c5;
}

/* Listes */
ul, ol {
    margin-left: 18pt; /* $base-font-size * 1.5 = 12 * 1.5 */
}

li {
    margin-bottom: 5pt;
}

/* Tableaux */
table {
    font-size: 10pt;
    border-collapse: collapse;
    width: 100%;
    margin: 15pt 0;
}

table th, table td {
    border: 1px solid #ccc;
    padding: 8pt;
    text-align: left;
}

table th {
    background-color: #f5f5f5;
    font-weight: bold;
}

.table-caption {
    text-align: center;
    margin-bottom: 10pt;
    font-style: italic;
}

/* Rôles personnalisés */
.removed {
    font-style: italic;
    text-decoration: line-through;
    text-decoration-color: #6ea1c5;
}

/* Admonitions */
.admonitionblock {
    margin: 15pt 0;
    margin-left: 10pt;
    padding: 10pt;
    border-left: 4px solid #6ea1c5;
    background-color: #f9f9f9;
}

.admonitionblock .title {
    font-weight: bold;
    color: #6ea1c5;
    margin-bottom: 5pt;
}

/* Blocs de code */
pre, code {
    font-family: 'Courier New', monospace;
    background-color: #f5f5f5;
    padding: 10pt;
    border: 1px solid #ddd;
    border-radius: 4px;
}

code {
    padding: 2pt 4pt;
    font-size: 11pt;
}

/* Paragraphes */
p {
    margin-bottom: 12pt;
    text-align: justify;
}

/* Citations */
blockquote {
    margin: 15pt 20pt;
    padding: 10pt;
    border-left: 4px solid #6ea1c5;
    font-style: italic;
    background-color: #f9f9f9;
}

/* Images */
img {
    max-width: 100%;
    height: auto;
}

.imageblock {
    text-align: center;
    margin: 15pt 0;
}

.image-caption {
    text-align: center;
    font-style: italic;
    margin-top: 5pt;
    font-size: 11pt;
}

/* Impression */
@media print {
    body {
        margin: 0.75in 1in;
    }

    .page-break {
        page-break-before: always;
    }

    /* Numérotation des pages en pied de page */
    @page {
        margin: 0.75in 1in;
        @bottom-right {
            content: counter(page);
            font-family: 'Fira Go', Arial, sans-serif;
            font-size: 10pt;
        }
    }
}
</style>
<div class="title-logo">
    <img src="themes/logo-griis-texte.png" alt="Logo GRIIS" class="header-logo">
</div>
</head>
<body class="book">
<div id="header">
<h1>Conception du module « <em>SPEDS - Transport</em> »</h1>
<div class="details">
<span id="author" class="author">Équipe du GRIIS</span><br>
<span id="email" class="email"><a href="mailto:info@griis.ca">info@griis.ca</a></span><br>
<span id="revnumber">version ,</span>
<span id="revdate">2025-07-01</span>
<br><span id="revremark"></span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table des matières</div>
<ul class="sectlevel1">
<li><a href="#_rôle_du_module">1. Rôle du module</a></li>
<li><a href="#_implémentation_du_module">2. Implémentation du module</a></li>
<li><a href="#_modèle_propre_au_module">3. Modèle propre au module</a>
<ul class="sectlevel2">
<li><a href="#_état_de_transport">3.1. État de transport</a>
<ul class="sectlevel3">
<li><a href="#_fenestration">3.1.1. Fenestration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_mode_de_transmission">4. Mode de transmission</a></li>
<li><a href="#_type_au_module">5. Type au module</a>
<ul class="sectlevel2">
<li><a href="#_type_de_donnée">5.1. Type de donnée</a>
<ul class="sectlevel3">
<li><a href="#_format_dentête_ent_t">5.1.1. Format d&#8217;entête (<code>Ent_T</code>)</a></li>
<li><a href="#_sceau_dintégrité_sceau_t">5.1.2. Sceau d&#8217;intégrité (<code>Sceau_T</code>)</a></li>
<li><a href="#_message_pdu">5.1.3. Message (PDU)</a></li>
<li><a href="#_interface_de_lunité_de_données_du_service_idu">5.1.4. Interface de l&#8217;unité de données du service (IDU)</a></li>
</ul>
</li>
<li><a href="#_type_de_message">5.2. Type de message</a>
<ul class="sectlevel3">
<li><a href="#_tra_msg_env">5.2.1. TRA.MSG.ENV</a></li>
<li><a href="#_tra_msg_rec">5.2.2. TRA.MSG.REC</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_hypothèse_du_module">6. Hypothèse du module</a></li>
<li><a href="#_contrainte_du_module">7. Contrainte du module</a></li>
<li><a href="#_processus_du_module">8. Processus du module</a>
<ul class="sectlevel2">
<li><a href="#_exception_générale">8.1. Exception générale</a></li>
<li><a href="#_processus_pour_un_client">8.2. Processus pour un client</a>
<ul class="sectlevel3">
<li><a href="#_pro_04_processus_demande_déchanger_des_données">8.2.1. [PRO-04] Processus « Demande d’échanger des données »</a></li>
<li><a href="#_pro_05_processus_confirme_léchange_de_données">8.2.2. [PRO-05] Processus « Confirme l’échange de données »</a></li>
</ul>
</li>
<li><a href="#_processus_pour_un_serveur">8.3. Processus pour un serveur</a>
<ul class="sectlevel3">
<li><a href="#_pro_11_processus_traite_léchange_de_données">8.3.1. [PRO-11] Processus « Traite l&#8217;échange de données »</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_incongruités">9. Incongruités</a></li>
<li><a href="#_annexes">10. Annexes</a>
<ul class="sectlevel2">
<li><a href="#Message">10.1. Protocol Data Unit de la couche Transport (4)</a></li>
<li><a href="#InterfaceDataUnit-3_4">10.2. Interface Data Unit entre la couche session(3) et la couche transport (4)</a></li>
<li><a href="#InterfaceDataUnit-4_5">10.3. Interface Data Unit entre la couche transport(4) et la couche réseau (5)</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Statut</caption>
<colgroup>
<col style="width: 55.5555%;">
<col style="width: 11.1111%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Statut</th>
<th class="tableblock halign-center valign-top">Initiales</th>
<th class="tableblock halign-right valign-top">Date</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conception prête à être révisée</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">BD</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2025-08-06 08:55</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Révision du spécificateur réalisée</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">BF</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2025-08-06 09:24</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Révision du concepteur des tests réalisée</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">FO</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2025-08-06 09:29</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Historique</caption>
<colgroup>
<col style="width: 55.5555%;">
<col style="width: 11.1111%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Changement important</th>
<th class="tableblock halign-center valign-top">Initiales</th>
<th class="tableblock halign-right valign-top">Date</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notes pour une première version sans fenêtrage</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">BF</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2025-01-30 15:00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Itération 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">FO</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2025-02-05 9:00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Itération 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">MD</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2025-04-24 07:34</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Itération 3</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">FO</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2025-05-30 18:19</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Itération 6</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">BD</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2025-08-06 08:55</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Référence</caption>
<colgroup>
<col>
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Document</th>
<th class="tableblock halign-right valign-top">Consultation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4_speds-transport-srs.adoc</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2025-07-30</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_rôle_du_module">1. Rôle du module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Le rôle de <code>SPEDS - Transport</code> est d&#8217;assurer une communication de bout en bout. Entre autres, la couche transport a l&#8217;objectif de garantir et asssurer une qualité de communication avec une gestion des erreurs, un ordonnancement et un contrôle des flux des échanges.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implémentation_du_module">2. Implémentation du module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Le module <code>SPEDS - Transport</code> est implementé par le produit <code>speds-transport</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<img src="./images/icons/important.png" alt="Important">
</td>
<td class="content">
<div class="paragraph">
<p><strong>2025-05-30</strong></p>
</div>
<div class="paragraph">
<p>Pour les premières itérations d&#8217;implémentation, le module ne sera considéré que comme un simple système qui envoie des messages et attends une confirmation en ne vérifiant que l&#8217;intégrité des contenus. Il n&#8217;y aura donc aucun système de PFE/PFA pour le moment. Les processus concernant ce mécanisme ne seront pas présents dans cette conception.</p>
</div>
<div class="paragraph">
<p>Pour les fins du concepteur qui aura à faire avancer cette conception en lien avec les concepts PFE/PFA, voir la version gardé dans le dossier d&#8217;archive <code>_arc</code> ou restaurer avec l&#8217;historique les sections en développement.</p>
</div>
<div class="paragraph">
<p>Ainsi, les types de message traité par la couche <code>Transport</code> sont <code>TRA.MSG.ENV</code> et <code>TRA.MSG.REC</code>.  Tout autre message doit être ignoré.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Le module <code>SPEDS - Transport</code> consiste en l&#8217;implémentation de la couche <code>Transport</code> du protocole <code>SPEDS</code> qui s&#8217;inspire du modèle OSI de protocole par couche.</p>
</div>
<div class="paragraph">
<p>Un concept important à comprendre en lien avec la couche <code>Transport</code> est que cette couche suit le patron requête-réponse (request-response) au sens strict, mais les réponses reçues ne sont que des confirmations de réception de l&#8217;information envoyée. Donc, l&#8217;information elle-même qui circule au sein de la couche <code>Transport</code> (et qui équivaut au message <code>Session</code>) suit plutôt le patron tire-et-oublie (fire-and-forget). C&#8217;est la raison pour laquelle la primitive <code>Response</code> n&#8217;est pas utilisée, d&#8217;une part, et que la primitive <code>Confirm</code> ne remonte aucune information à la couche <code>Session</code>, d&#8217;autre part.</p>
</div>
<div class="paragraph">
<p>C&#8217;est également la raison qui nous a fait dupliquer des processus pour le client et le serveur pour l&#8217;aiguillage.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modèle_propre_au_module">3. Modèle propre au module</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_état_de_transport">3.1. État de transport</h3>
<div class="paragraph">
<p>Le module requiert de valider qu&#8217;un message de confirmation reçu par un client possède le même identifiant que la demande d&#8217;échange de données. Conséquemment, le module doit conserver un ensemble d&#8217;idenfiants de messages envoyés jusqu&#8217;à l&#8217;obtention de la réponse correspondante.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensemble d&#8217;identifiants de message</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_fenestration">3.1.1. Fenestration</h4>
<div class="paragraph">
<p>Le module aura éventuellement besoin d&#8217;un modèle notamment pour l&#8217;état du transport relié à la fenestration des messages, mais pas pour cette version.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mode_de_transmission">4. Mode de transmission</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pour les versions courantes, le mode de transmission est sans connexion avec accusé de réception. (Il sera orienté connexion lors de l&#8217;implémentation du mécanisme de fenêtre d&#8217;envoi.)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_type_au_module">5. Type au module</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_type_de_donnée">5.1. Type de donnée</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Type simple de donnée</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Nom</th>
<th class="tableblock halign-left valign-top">Format</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourceIri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">chaîne de caractères en format IRI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">L&#8217;adresse réseau unique à la source de la communication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">trackingNumber</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">chaîne de caractères en format UUID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Le numéro de suivi. Au choix de l&#8217;implémenteur lorsque non précisé.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">destinationIri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">chaîne de caractères en format IRI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">L&#8217;adresse réseau unique au destinataire de la communication.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_format_dentête_ent_t">5.1.1. Format d&#8217;entête (<code>Ent_T</code>)</h4>
<div class="paragraph">
<p>Un type décrivant un format d&#8217;entête.
Ce type est équivalent à la propriété <code>header</code> appartenant au schéma JSON du PDU
(cf. annexe <a href="#Message">Protocol Data Unit de la couche Transport (4)</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_sceau_dintégrité_sceau_t">5.1.2. Sceau d&#8217;intégrité (<code>Sceau_T</code>)</h4>
<div class="paragraph">
<p>Un type décrivant un sceau d&#8217;intégrité. Ce type est attendu être équivalent à la propriété <code>stamp</code> appartenant au schéma JSON du PDU (cf. annexe <a href="#Message">Protocol Data Unit de la couche Transport (4)</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_message_pdu">5.1.3. Message (PDU)</h4>
<div class="paragraph">
<p>Un type décrivant un format de message.
Ce type est attendu être équivalent au schéma JSON du même objet
(cf. annexe <a href="#Message">Protocol Data Unit de la couche Transport (4)</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_interface_de_lunité_de_données_du_service_idu">5.1.4. Interface de l&#8217;unité de données du service (IDU)</h4>
<div class="paragraph">
<p>Unité d’information transférée en une seule interaction à l’interface de 2 couches, constituée d’information de contrôle d’interface (ICI) et de l&#8217;unité de données du service (SDU).</p>
</div>
<div class="paragraph">
<p>(cf. annexe <a href="#InterfaceDataUnit-3_4">Interface Data Unit entre la couche session(3) et la couche transport (4)</a>) et
(cf. annexe <a href="#InterfaceDataUnit-4_5">Interface Data Unit entre la couche transport(4) et la couche réseau (5)</a>).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_type_de_message">5.2. Type de message</h3>
<div class="paragraph">
<p>Tous les messages de la couche <code>Transport</code> suivront la même structure déterminée par le <code><em>PDU</em></code> (Protocol data unit). Ces messages sont équivalents au schéma JSON <a href="#Message">Protocol Data Unit de la couche Transport (4)</a> en annexe.</p>
</div>
<div class="sect3">
<h4 id="_tra_msg_env">5.2.1. TRA.MSG.ENV</h4>
<div class="paragraph">
<p>Voici les particularités du message <code>TRA.MSG.ENV</code> en lien avec le <code><em>PDU</em></code> de la couche <code>Transport</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pour l&#8217;attribut <code>header</code>:</p>
<div class="ulist">
<ul>
<li>
<p>L&#8217;attribut <code>msgtype</code> contient la valeur <code>TRA.MSG.ENV</code>;</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_tra_msg_rec">5.2.2. TRA.MSG.REC</h4>
<div class="paragraph">
<p>Voici les particularités du message <code>TRA.MSG.REC</code> en lien avec le <code><em>PDU</em></code> de la couche <code>Transport</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pour l&#8217;attribut <code>header</code>:</p>
<div class="ulist">
<ul>
<li>
<p>L&#8217;attribut <code>msgtype</code> contient la valeur <code>TRA.MSG.REC</code>;</p>
</li>
<li>
<p>Le contenu contient <code>ACK</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hypothèse_du_module">6. Hypothèse du module</h2>
<div class="sectionbody">
<div class="hdlist">
<table>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tr>
<td class="hdlist1">
[HYP-001]
</td>
<td class="hdlist2">
<p>Les couches sous-jacentes à la couche <code>Transport</code> sont en mesure de transmettre les messages <code>Transport</code> de la source à la destination.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contrainte_du_module">7. Contrainte du module</h2>
<div class="sectionbody">
<div class="hdlist">
<table>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tr>
<td class="hdlist1">
[CON-001]
</td>
<td class="hdlist2">
<p>La fonction de hachage est <code>SHA-512</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
[CON-002]
</td>
<td class="hdlist2">
<p>La couche transport (incluant les états de celle-ci et les structures) doit gérer la concurrence.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
[CON-003]
</td>
<td class="hdlist2">
<p>Des entités identifiées chacune par un unique code et joignables chacune à un unique IRI doivent être en mesure de communiquer par la couche transport.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_processus_du_module">8. Processus du module</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_exception_générale">8.1. Exception générale</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">DeserializationException</dt>
<dd>
<p>Exception de désérialisation d&#8217;un message reçu</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_processus_pour_un_client">8.2. Processus pour un client</h3>
<div class="hdlist">
<table>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tr>
<td class="hdlist1">
[PRO-04] Demande d’échanger des données 
</td>
<td class="hdlist2">
<p>Demande d&#8217;échanger des données sous une requête.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
[PRO-05] Confirme l’échange de données 
</td>
<td class="hdlist2">
<p>Confirme l&#8217;échange de données sous une réponse.</p>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_pro_04_processus_demande_déchanger_des_données">8.2.1. [PRO-04] Processus « Demande d’échanger des données »</h4>
<div class="sect4">
<h5 id="_comportement">Comportement</h5>
<div class="paragraph">
<p><strong><em>Réception du message d&#8217;entrée</em></strong></p>
</div>
<div class="hdlist">
<table>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tr>
<td class="hdlist1">
[PRO-04.1]
</td>
<td class="hdlist2">
<p>Récupération du ICI et SDU de l&#8217;InterfaceDataUnit-3_4 reçue en entrée.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
[PRO-04.2]
</td>
<td class="hdlist2">
<p>Mémoriser l&#8217;identifiant du message pour validation future.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong><em>Préparer le message pour la couche inférieure</em></strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[PRO-04.3]</dt>
<dd>
<p>Création de l&#8217;ICI à transmettre à la couche inférieure <code>Réseau</code> et contenant les informations suivantes :</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>L&#8217;adresse <code>source_iri</code> prise de l&#8217;ICI récupéré en entrée ;</p>
</li>
<li>
<p>L&#8217;adresse <code>destination_iri</code> prise de l&#8217;ICI récupéré en entrée ;</p>
</li>
<li>
<p>Un numéro de suivi généré.</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">[PRO-04.4]</dt>
<dd>
<p>Création du message TPDU de type <strong>TRA.MSG.ENV</strong></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Création de l&#8217;entête <code>Ent_S</code>.</p>
</li>
<li>
<p>Création du sceau d&#8217;intégrité <code>Sceau_S</code> de l&#8217;entête et du contenu (SDU reçu). Utiliser la fonction de hachage [CON-001].</p>
</li>
<li>
<p>Création du message <code>Transport</code> de type <strong>TRA.MSG.ENV</strong> contenant l&#8217;entête <code>Ent_S</code>, le sceau d&#8217;intégrité <code>Sceau_S</code> et le contenu qui se trouve être le SDU reçu en entrée.</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">[PRO-04.5]</dt>
<dd>
<p>Création de l&#8217;InterfaceDataUnit-4_5 composée du ICI et du SDU où le SDU est le message TPDU sérialisé.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_interface">Interface</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Interface</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Déclencheur</th>
<th class="tableblock halign-left valign-top">Condition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Message reçu de la couche supérieure</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>La primitive de service est <code>request</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title">flux d&#8217;entrée</div>
<ul>
<li>
<p><a href="#InterfaceDataUnit-3_4">Interface Data Unit entre la couche session(3) et la couche transport (4)</a> provenant de la couche supérieure <code>Session</code>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">flux de sortie</div>
<ul>
<li>
<p><a href="#InterfaceDataUnit-4_5">Interface Data Unit entre la couche transport(4) et la couche réseau (5)</a> transmis à la couche inférieure <code>Réseau</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_erreur">Erreur</h5>
<div class="paragraph">
<p>S.O.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_pro_05_processus_confirme_léchange_de_données">8.2.2. [PRO-05] Processus « Confirme l’échange de données »</h4>
<div class="sect4">
<h5 id="_comportement_2">Comportement</h5>
<div class="paragraph">
<p><strong><em>Récupération du message d&#8217;entrée</em></strong></p>
</div>
<div class="hdlist">
<table>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tr>
<td class="hdlist1">
[PRO-05.1]
</td>
<td class="hdlist2">
<p>Récupération du ICI et SDU de InterfaceDataUnit-4_5 reçu en entrée.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong><em>Validation du message d&#8217;entrée TRA.MSG.REC</em></strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[PRO-05.2]</dt>
<dd>
<p>Verification de l&#8217;intégrité de l&#8217;entête du <code>message</code></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Vérifier que <code>message &#8594; stamp &#8594; header_seal</code> est le hachage de <code>message &#8594; header</code>. Dans le cas d&#8217;un échec de la vérification, ignorer le message et terminer le processus.</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">[PRO-05.3]</dt>
<dd>
<p>Vérification de l&#8217;intégrité du contenu du <code>message</code></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Vérifier que <code>message &#8594; stamp &#8594; content_seal</code> est le hachage de <code>message &#8594; content</code> et que ce contenu correspond bien à "ACK". Dans le cas d&#8217;un échec de la vérification, ignorer le message et terminer le processus.</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">[PRO-05.4]</dt>
<dd>
<p>Vérification du numéro de message</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Si le numéro <code>message &#8594; header &#8594; id</code> correspond à un envoi précédent, alors le retirer de la mémorisation.</p>
</li>
<li>
<p>Si le numéro <code>message &#8594; header &#8594; id</code> ne correspond à aucun envoi précédent, alors ignorer le message et terminer le processus.</p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_interface_2">Interface</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Interface</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Déclencheur</th>
<th class="tableblock halign-left valign-top">Condition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Message reçu de la couche inférieure</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Le PDU est de type <code>TRA.MSG.REC</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title">flux d&#8217;entrée</div>
<ul>
<li>
<p><a href="#InterfaceDataUnit-4_5">Interface Data Unit entre la couche transport(4) et la couche réseau (5)</a> provenant de la couche inférieure <code>Réseau</code>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">flux de sortie</div>
<ul>
<li>
<p>S.O.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_erreur_2">Erreur</h5>
<div class="paragraph">
<p>S.O</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_processus_pour_un_serveur">8.3. Processus pour un serveur</h3>
<div class="hdlist">
<table>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tr>
<td class="hdlist1">
[PRO-11] Traite l&#8217;échange de données
</td>
<td class="hdlist2">
<p>Traite la demande d&#8217;échange de données, valide celle-ci. Quand celle-ci est valide, le receveur de données rapporte (indique) les données, et répond une confirmation de la réception des données à l&#8217;envoyeur.</p>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_pro_11_processus_traite_léchange_de_données">8.3.1. [PRO-11] Processus « Traite l&#8217;échange de données »</h4>
<div class="sect4">
<h5 id="_comportement_3">Comportement</h5>
<div class="paragraph">
<p><strong><em>Récupération du message d&#8217;entrée</em></strong></p>
</div>
<div class="hdlist">
<table>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tr>
<td class="hdlist1">
[PRO-11.1]
</td>
<td class="hdlist2">
<p>Récupération du ICI et SDU de InterfaceDataUnit-4_5 reçu en entrée.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong><em>Validation du message d&#8217;entrée</em></strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[PRO-11.2]</dt>
<dd>
<p>Valider le message reçu (propriété <code>message</code> de la InterfaceDataUnit-4_5 reçue)</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verification de l&#8217;intégrité de l&#8217;entête du <code>message</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Vérifier que <code>header_seal</code> est le hachage de <code>message &#8594; header</code>. Dans le cas d&#8217;un échec de la vérification, ignorer le message et terminer le processus.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Vérification de l&#8217;intégrité du contenu du <code>message</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Vérifier que <code>content_seal</code> est le hachage de <code>message &#8594; content</code>. Dans le cas d&#8217;un échec de la vérification, ignorer le message et terminer le processus.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong><em>Préparer le message pour la couche supérieure</em></strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[PRO-11.3]</dt>
<dd>
<p><a id="PRO-11.3"></a> Création de ICI contenant les informations suivantes :</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Les adresses <code>source_iri</code> et <code>destination_iri</code> sont les mêmes que dans la ICI en entrée</p>
</li>
<li>
<p>Le code <code>source_code</code> est le code unique associé à <code>source_iri</code>,</p>
</li>
<li>
<p>Le code <code>destination_code</code> est le code unique associé à <code>destination_iri</code>,</p>
</li>
<li>
<p>Le numéro de suivi.</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">[PRO-11.4]</dt>
<dd>
<p>Création de InterfaceDataUnit-3_4 composé du ICI précédemment créé <a href="#PRO-11.3">[PRO-11.3]</a> et du SDU où le SDU est le <code>content</code> du message <code>TRA.MSG.ENV</code> reçu en entrée.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong><em>Création du message d&#8217;accusé de réception</em></strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[PRO-11.5]</dt>
<dd>
<p><a id="PRO-11.5"></a> Création de ICI contenant les informations suivantes :</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>L&#8217;adresse <code>source_iri</code> est la <code>destination_iri</code> de la ICI reçue en entrée,</p>
</li>
<li>
<p>L&#8217;adresse <code>destination_iri</code> est la <code>source_iri</code> de la ICI reçue en entrée,</p>
</li>
<li>
<p>Le numéro de suivi.</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">[PRO-11.6]</dt>
<dd>
<p><a id="PRO-11.6"></a> Création du message de type <code>TRA.MSG.REC</code> avec le contenu <code>ACK</code>.</p>
</dd>
<dt class="hdlist1">[PRO-11.7]</dt>
<dd>
<p>Création de InterfaceDataUnit-4_5 composé du ICI créé à <a href="#PRO-11.5">[PRO-11.5]</a> et du SDU où SDU est le message <code>TRA.MSG.REC</code> précédemment créé à <a href="#PRO-11.6">[PRO-11.6]</a>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_interface_3">Interface</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Interface</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Déclencheur</th>
<th class="tableblock halign-left valign-top">Condition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Message reçu de la couche inférieure</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Le PDU est de type <code>TRA.MSG.ENV</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title">flux d&#8217;entrée</div>
<ul>
<li>
<p><a href="#InterfaceDataUnit-4_5">Interface Data Unit entre la couche transport(4) et la couche réseau (5)</a> provenant de la couche inférieure</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">flux de sortie</div>
<ul>
<li>
<p><a href="#InterfaceDataUnit-3_4">Interface Data Unit entre la couche session(3) et la couche transport (4)</a> est transmis à la couche supérieure <code>Session</code>.</p>
</li>
<li>
<p><a href="#InterfaceDataUnit-4_5">Interface Data Unit entre la couche transport(4) et la couche réseau (5)</a> est transmis à la couche inférieure <code>Réseau</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_erreur_3">Erreur</h5>
<div class="paragraph">
<p>S.O</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_incongruités">9. Incongruités</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Les messages <code>TRA.INF.ENV</code>, <code>TRA.INF.REC</code>, <code>TRA.FIN.ENV</code>,<code>TRA.FIN.REC</code> bien que mentionnés ne sont pas traités dans cette version.</p>
</li>
<li>
<p>La spécification définit certains comportements qui ne sont pas appliqués dans cette conception, notamment tout ce qui entoure le concept de PFE/PFA de la fenêtre d&#8217;envoi.  De ce fait, tout ce qui est relatif à <code>parameters</code> dans la section <code>header</code> de <a href="#Message">Protocol Data Unit de la couche Transport (4)</a> est éliminé. En conséquence, le schéma diffère de celui de la SRS.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_annexes">10. Annexes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Message">10.1. Protocol Data Unit de la couche Transport (4)</h3>
<div class="listingblock">
<div class="title"><em>PDU</em> de la couche <code>Transport</code></div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "$id": "https://griis.ca/speds/json/schema/pdu/ProtocolDataUnit-4-TRA.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ProtocolDataUnit-4-TRA - 2025-04-11T15:25:28-0400",
  "$defs": {
    "iri": {
      "description": "A valid IR according to RFC 3987",
      "type": "string",
      "format": "iri"
    },
    "uuid": {
      "description": "A valid UUID according to RFC 4122",
      "type": "string",
      "format": "uuid"
    },
    "bytestring": {
      "description": "A base-64 encoded bytestring",
      "type": "string",
      "contentEncoding": "base64"
    },
    "speds_version": {
      "type": "string",
      "pattern": "^[0-9]+(\\.[0-9]+)(\\.[0-9]+[a-z]*)$"
    }
  },
  "description": "For the Transport Layer of SPEDS (Layer 4) : a unit of data which is transferred from one end of a connection to the other with no loss of identity or meaning.",
  "type": "object",
  "properties": {
    "header": {
      "description": "The header of a SPEDS message. Mandatory in all layers.",
      "type": "object",
      "properties": {
        "msgtype": {
          "description": "The type of a SPEDS message. Mandatory in all layers.",
          "type": "string",
          "enum": [
            "TRA.INF.ENV",
            "TRA.INF.REC",
            "TRA.MSG.ENV",
            "TRA.MSG.REC",
            "TRA.FIN.ENV",
            "TRA.FIN.REC"
          ]
        },
        "id": {
          "description": "The identifier of a SPEDS message. Mandatory in all layers.",
          "oneOf": [
            {
              "description": "This identifier format is used for TRA.MSG message type",
              "type": "object",
              "properties": {
                "message_number": {
                  "type": "number"
                },
                "repetition_number": {
                  "type": "number"
                }
              },
              "required": [
                "message_number",
                "repetition_number"
              ],
              "additionalProperties": false
            },
            {
              "description": "This identifier format is used for TRA.INF and TRA.FIN message type",
              "type": "string",
              "format": "uuid"
            }
          ]
        },
        "source_code": {
          "description": "The source entity code (a Lodad GUID)",
          "type": "string",
          "format": "LodadGUID"
        },
        "destination_code": {
          "description": "The destination entity code (a Lodad GUID)",
          "type": "string",
          "format": "LodadGUID"
        },
        "parameters": {
          "description": "The parameters of the Transport layer.",
          "type": "object",
          "oneOf": [
            {
              "properties": {
                "PFE": {
                  "type": "object",
                  "properties": {
                    "DMR": {
                      "type": "number"
                    },
                    "DME": {
                      "type": "number"
                    },
                    "TFE": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "DMR",
                    "DME",
                    "TFE"
                  ],
                  "additionalProperties": false
                }
              },
              "required": [
                "PFE"
              ]
            },
            {
              "properties": {
                "PFA": {
                  "type": "object",
                  "properties": {
                    "DRC": {
                      "type": "number"
                    },
                    "DMT": {
                      "type": "number"
                    },
                    "TFA": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "DRC",
                    "DMT",
                    "TFA"
                  ],
                  "additionalProperties": false
                }
              },
              "required": [
                "PFA"
              ]
            }
          ],
          "properties": {
            "agreement": {
              "type": "object",
              "properties": {
                "active": {
                  "type": "boolean"
                },
                "start": {
                  "description": "A date and time as defined by the ISO8601 format (in RFC 3339, section 5.6).",
                  "type": "string",
                  "format": "date-time"
                },
                "duration": {
                  "description": "A duration as defined by the ISO 8601 ABNF for \"duration\" (in RFC 3339, Appendix A)",
                  "type": "string",
                  "format": "duration"
                }
              },
              "required": [
                "active",
                "start",
                "duration"
              ]
            }
          },
          "minProperties": 2,
          "maxProperties": 2
        },
        "SPEDS": {
          "type": "object",
          "properties": {
            "version": {
              "description": "The version of the SPEDS protocol used for this SDU.",
              "$ref": "#/$defs/speds_version"
            },
            "reference": {
              "description": "The reference of the SPEDS protocol version used for this SDU.",
              "$ref": "#/$defs/iri"
            }
          },
          "required": [
            "version",
            "reference"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "msgtype",
        "id",
        "source_code",
        "destination_code",
        "parameters",
        "SPEDS"
      ]
    },
    "stamp": {
      "type": "object",
      "properties": {
        "header_seal": {
          "$ref": "#/$defs/bytestring"
        },
        "content_seal": {
          "$ref": "#/$defs/bytestring"
        }
      },
      "required": [
        "header_seal",
        "content_seal"
      ],
      "additionalProperties": false
    },
    "content": {
      "description": "The content of a SPEDS message. Mandatory in all layers.",
      "type": "string"
    }
  },
  "required": [
    "header",
    "stamp",
    "content"
  ],
  "additionalProperties": false
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="InterfaceDataUnit-3_4">10.2. Interface Data Unit entre la couche session(3) et la couche transport (4)</h3>
<div class="listingblock">
<div class="title">Format d&#8217;interface d&#8217;unité de données entre la couche réseau et la couche inférieure</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "$id": "https://griis.ca/speds/json/schema/idu/InterfaceDataUnit-3_4.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "InterfaceDataUnit-3_4 - 2025-07-01T21:30:00-0400",
  "description": "An agreed way of communication among SPEDS layers Session (3) and Transport (4).",
  "type": "object",
  "properties": {
    "context": {
      "description": "The context shared between these two SPEDS layers. This is the ICI (Interface Control Information), i.e. an information passed across an interface to coordinate interactions between two adjacent layers.",
      "type": "object",
      "properties": {
        "source_code": {
          "description": "The source entity code (a Lodad GUID)",
          "type": "string",
          "format": "LodadGUID"
        },
        "destination_code": {
          "description": "The destination entity code (a Lodad GUID)",
          "type": "string",
          "format": "LodadGUID"
        },
        "source_iri": {
          "description": "The source entity IRI (according to RFC3987).",
          "type": "string",
          "format": "iri"
        },
        "tracking_number": {
          "description": "The number used to track the PDU. If the PDU is a response (resp. a confirmation), it should be the tracking number of the corresponding original indication (resp. request).",
          "type": "string",
          "format": "uuid"
        },
        "destination_iri": {
          "description": "The destination entity IRI (according to RFC3987).",
          "type": "string",
          "format": "iri"
        },
        "options": {
          "description": "The options shared between the layers.",
          "oneOf": [
            {
              "const": false
            },
            {
              "type": "object",
              "minProperties": 1
            }
          ]
        }
      },
      "required": [
        "source_code",
        "destination_code",
        "source_iri",
        "destination_iri",
        "tracking_number",
        "options"
      ],
      "additionalProperties": false
    },
    "message": {
      "description": "The message shared between these two SPEDS layers. This is the SPDU : the PDU (Protocol Data Unit) of the Session layer (3).",
      "type": "string"
    }
  },
  "required": [
    "context",
    "message"
  ],
  "additionalProperties": false
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="InterfaceDataUnit-4_5">10.3. Interface Data Unit entre la couche transport(4) et la couche réseau (5)</h3>
<div class="listingblock">
<div class="title">Format d&#8217;interface d&#8217;unité de données entre la couche réseau et la couche inférieure</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "$id": "https://griis.ca/speds/json/schema/idu/InterfaceDataUnit-4_5.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "InterfaceDataUnit-4_5 - 2025-07-01T21:30:00-0400",
  "description": "An agreed way of communication among SPEDS layers Transport (4) and Network (5).",
  "type": "object",
  "properties": {
    "context": {
      "description": "The context shared between these two SPEDS layers. This is the ICI (Interface Control Information), i.e. an information passed across an interface to coordinate interactions between two adjacent layers.",
      "type": "object",
      "properties": {
        "source_iri": {
          "description": "The source entity IRI (according to RFC3987).",
          "type": "string",
          "format": "iri"
        },
        "destination_iri": {
          "description": "The destination entity IRI (according to RFC3987).",
          "type": "string",
          "format": "iri"
        },
        "tracking_number": {
          "description": "The number used to track the PDU. If the PDU is a response (resp. a confirmation), it should be the tracking number of the corresponding original indication (resp. request).",
          "type": "string",
          "format": "uuid"
        },
        "options": {
          "description": "The options shared between the layers.",
          "oneOf": [
            {
              "const": false
            },
            {
              "type": "object",
              "minProperties": 1
            }
          ]
        }
      },
      "required": [
        "source_iri",
        "destination_iri",
        "tracking_number",
        "options"
      ],
      "additionalProperties": false
    },
    "message": {
      "description": "The message shared between these two SPEDS layers. This is the TPDU : the PDU (Protocol Data Unit) of the Transport layer (4).",
      "type": "string"
    }
  },
  "required": [
    "context",
    "message"
  ],
  "additionalProperties": false
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version <br>
Last updated 2025-08-14 11:17:03 -0400
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>